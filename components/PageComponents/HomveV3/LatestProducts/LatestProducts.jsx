import React, { useEffect, useState } from 'react'
import styles from './LatestProducts.module.css'
import HeadingWithBtn from '../../../UI/HeadingWithBtn/HeadingWithBtn'
import 'swiper/css'
import 'swiper/css/free-mode'
import 'swiper/css/thumbs'
import 'swiper/css/navigation'
import NewCard from '../../../UI/NewCard/NewCard'

const LatestProducts = ({ data, setmodalLoading, setmodal, setModalData }) => {
	const [swiperLoaded, setSwiperLoaded] = useState(false)
	const [SwiperComponent, setSwiperComponent] = useState(null)

	const loadSwiper = async () => {
		const { Swiper, SwiperSlide } = await import('swiper/react')
		const { FreeMode, Pagination } = await import('swiper')

		setSwiperComponent(() => ({
			Swiper,
			SwiperSlide,
			FreeMode,
			Pagination
		}))
		setSwiperLoaded(true)
	}

	useEffect(() => {
		loadSwiper()
	}, [])
	return (
		<section className='lite-pink-bg sec-m' style={{ position: 'relative', overflow: 'hidden' }}>
			<svg className={styles.doodles} width='61' height='61' viewBox='0 0 61 61' fill='none' xmlns='http://www.w3.org/2000/svg'>
				<g clipPath='url(#clip0_613_454)'>
					<path
						d='M18.3543 37.3201C17.2371 37.9651 16.0702 38.1246 14.8534 37.7986C13.6366 37.4726 12.7057 36.751 12.0607 35.6338C11.4157 34.5166 11.2562 33.3496 11.5822 32.1328C11.9083 30.916 12.6299 29.9851 13.7471 29.3401C14.8643 28.6951 16.0313 28.5356 17.248 28.8617C18.4648 29.1877 19.3957 29.9093 20.0407 31.0265C20.6857 32.1437 20.8452 33.3107 20.5192 34.5275C20.1932 35.7442 19.4715 36.6751 18.3543 37.3201ZM21.8505 26.7896C20.7333 27.4346 19.5663 27.5941 18.3496 27.2681C17.1328 26.9421 16.2019 26.2204 15.5569 25.1032C14.9119 23.986 14.7524 22.8191 15.0784 21.6023C15.4045 20.3855 16.1261 19.4546 17.2433 18.8096C18.3605 18.1646 19.5275 18.0051 20.7442 18.3311C21.961 18.6572 22.8919 19.3788 23.5369 20.496C24.1819 21.6132 24.3414 22.7802 24.0154 23.9969C23.6893 25.2137 22.9677 26.1446 21.8505 26.7896ZM31.4265 21.2609C30.3093 21.9059 29.1423 22.0654 27.9256 21.7394C26.7088 21.4133 25.7779 20.6917 25.1329 19.5745C24.4879 18.4573 24.3284 17.2904 24.6544 16.0736C24.9805 14.8568 25.7021 13.9259 26.8193 13.2809C27.9365 12.6359 29.1035 12.4764 30.3202 12.8024C31.537 13.1285 32.4679 13.8501 33.1129 14.9673C33.7579 16.0845 33.9174 17.2515 33.5914 18.4682C33.2653 19.685 32.5437 20.6159 31.4265 21.2609ZM42.2943 23.4984C41.1771 24.1434 40.0101 24.3029 38.7934 23.9768C37.5766 23.6508 36.6457 22.9292 36.0007 21.812C35.3557 20.6948 35.1962 19.5278 35.5222 18.3111C35.8483 17.0943 36.5699 16.1634 37.6871 15.5184C38.8043 14.8734 39.9712 14.7139 41.188 15.0399C42.4048 15.3659 43.3357 16.0876 43.9807 17.2048C44.6257 18.322 44.7852 19.4889 44.4592 20.7057C44.1331 21.9225 43.4115 22.8534 42.2943 23.4984ZM31.0002 51.299C29.8032 51.9901 28.5338 52.1109 27.1918 51.6613C25.8498 51.2118 24.8191 50.3627 24.0996 49.114C23.301 47.7308 23.0746 46.2478 23.4205 44.6649C23.7664 43.082 24.1125 41.5167 24.4589 39.969C24.7542 38.699 24.901 37.4176 24.8994 36.1247C24.8977 34.8319 25.0366 33.5366 25.3159 32.239C25.5018 31.2095 25.8499 30.246 26.3603 29.3484C26.8706 28.4509 27.5776 27.7405 28.4814 27.2173C29.3858 26.6951 30.3466 26.4241 31.3637 26.4044C32.3808 26.3846 33.3816 26.5516 34.3661 26.9053C35.6024 27.3265 36.7908 27.864 37.9315 28.5177C39.0721 29.1714 40.2734 29.7014 41.5351 30.1079C43.0497 30.5812 44.5784 31.0641 46.1211 31.5566C47.6638 32.0491 48.835 32.9867 49.6346 34.3692C50.3564 35.6194 50.5765 36.938 50.2948 38.325C50.0131 39.7119 49.274 40.7501 48.0774 41.4395C46.641 42.2688 45.1488 42.9707 43.6008 43.5453C42.0528 44.1198 40.5606 44.8217 39.1242 45.651C37.6878 46.4803 36.3338 47.4217 35.0622 48.475C33.7906 49.5284 32.4366 50.4697 31.0002 51.299Z'
						fill='#883CAC'
						fillOpacity='0.5'
					/>
				</g>
				<defs>
					<clipPath id='clip0_613_454'>
						<rect width='44.2296' height='44.2296' fill='white' transform='translate(0 22.1152) rotate(-30)' />
					</clipPath>
				</defs>
			</svg>

			<svg className={styles.doodles} width='25' height='25' viewBox='0 0 25 25' fill='none' xmlns='http://www.w3.org/2000/svg'>
				<g clipPath='url(#clip0_613_463)'>
					<path
						d='M7.48615 15.2205C7.03051 15.4836 6.55456 15.5486 6.05831 15.4157C5.56205 15.2827 5.18239 14.9884 4.91933 14.5327C4.65626 14.0771 4.59121 13.6012 4.72418 13.1049C4.85715 12.6086 5.15146 12.229 5.6071 11.9659C6.06275 11.7029 6.5387 11.6378 7.03495 11.7708C7.53121 11.9037 7.91087 12.1981 8.17393 12.6537C8.437 13.1093 8.50205 13.5853 8.36908 14.0815C8.23611 14.5778 7.9418 14.9575 7.48615 15.2205ZM8.91206 10.9257C8.45641 11.1888 7.98047 11.2538 7.48421 11.1208C6.98796 10.9879 6.6083 10.6936 6.34523 10.2379C6.08217 9.78227 6.01712 9.30632 6.15009 8.81007C6.28306 8.31382 6.57737 7.93416 7.03301 7.67109C7.48866 7.40802 7.96461 7.34298 8.46086 7.47595C8.95711 7.60892 9.33677 7.90322 9.59984 8.35887C9.86291 8.81451 9.92795 9.29046 9.79498 9.78672C9.66201 10.283 9.3677 10.6626 8.91206 10.9257ZM12.8176 8.67084C12.3619 8.93391 11.886 8.99895 11.3897 8.86598C10.8935 8.73301 10.5138 8.43871 10.2508 7.98306C9.98769 7.52742 9.92265 7.05147 10.0556 6.55521C10.1886 6.05896 10.4829 5.6793 10.9385 5.41623C11.3942 5.15317 11.8701 5.08812 12.3664 5.22109C12.8626 5.35406 13.2423 5.64837 13.5054 6.10401C13.7684 6.55966 13.8335 7.03561 13.7005 7.53186C13.5675 8.02811 13.2732 8.40777 12.8176 8.67084ZM17.25 9.58338C16.7943 9.84645 16.3184 9.9115 15.8221 9.77853C15.3259 9.64556 14.9462 9.35125 14.6831 8.8956C14.4201 8.43996 14.355 7.96401 14.488 7.46775C14.621 6.9715 14.9153 6.59184 15.3709 6.32878C15.8266 6.06571 16.3025 6.00066 16.7988 6.13363C17.295 6.2666 17.6747 6.56091 17.9378 7.01655C18.2008 7.4722 18.2659 7.94815 18.1329 8.4444C17.9999 8.94066 17.7056 9.32032 17.25 9.58338ZM12.6437 20.9217C12.1555 21.2036 11.6378 21.2529 11.0905 21.0695C10.5431 20.8862 10.1228 20.5399 9.82932 20.0306C9.50361 19.4665 9.4113 18.8616 9.55237 18.2161C9.69344 17.5705 9.8346 16.9321 9.97586 16.3009C10.0963 15.7829 10.1562 15.2603 10.1555 14.733C10.1548 14.2057 10.2115 13.6774 10.3254 13.1482C10.4012 12.7283 10.5432 12.3354 10.7513 11.9693C10.9595 11.6032 11.2478 11.3135 11.6164 11.1001C11.9853 10.8872 12.3771 10.7766 12.792 10.7686C13.2068 10.7605 13.615 10.8286 14.0165 10.9729C14.5207 11.1447 15.0054 11.3639 15.4706 11.6305C15.9358 11.8971 16.4257 12.1133 16.9403 12.279C17.5581 12.4721 18.1815 12.669 18.8107 12.8699C19.4399 13.0708 19.9175 13.4531 20.2437 14.017C20.5381 14.5269 20.6278 15.0647 20.5129 15.6303C20.398 16.196 20.0966 16.6194 19.6086 16.9006C19.0228 17.2388 18.4142 17.5251 17.7828 17.7594C17.1515 17.9937 16.5429 18.28 15.957 18.6183C15.3712 18.9565 14.819 19.3404 14.3004 19.77C13.7818 20.1996 13.2296 20.5835 12.6437 20.9217Z'
						fill='#883CAC'
						fillOpacity='0.5'
					/>
				</g>
				<defs>
					<clipPath id='clip0_613_463'>
						<rect width='18.0389' height='18.0389' fill='white' transform='translate(0 9.01953) rotate(-30)' />
					</clipPath>
				</defs>
			</svg>

			<svg className={styles.doodles} width='49' height='85' viewBox='0 0 49 85' fill='none' xmlns='http://www.w3.org/2000/svg'>
				<path
					d='M69.6864 15.1484C69.6864 11.9342 68.4096 8.85168 66.1368 6.5789C63.864 4.30613 60.7815 3.0293 57.5673 3.0293C54.3531 3.0293 51.2706 4.30613 48.9978 6.5789C46.725 8.85168 45.4482 11.9342 45.4482 15.1484C45.4617 18.3574 46.7474 21.4301 49.0233 23.6924L23.6943 49.0214C21.432 46.7455 18.3594 45.4597 15.1504 45.4462C11.9362 45.4462 8.85363 46.7231 6.58086 48.9958C4.30808 51.2686 3.03125 54.3511 3.03125 57.5653C3.03125 60.7795 4.30808 63.8621 6.58086 66.1348C8.85363 68.4076 11.9362 69.6845 15.1504 69.6845C15.1504 72.8986 16.4272 75.9812 18.7 78.254C20.9728 80.5267 24.0553 81.8036 27.2695 81.8036C30.4837 81.8036 33.5662 80.5267 35.839 78.254C38.1118 75.9812 39.3886 72.8986 39.3886 69.6845C39.3751 66.4755 38.0894 63.4028 35.8135 61.1405L61.1424 35.8115C63.4048 38.0874 66.4774 39.3731 69.6864 39.3867C72.9006 39.3867 75.9831 38.1098 78.2559 35.837C80.5287 33.5643 81.8055 30.4817 81.8055 27.2675C81.8055 24.0533 80.5287 20.9708 78.2559 18.698C75.9831 16.4252 72.9006 15.1484 69.6864 15.1484Z'
					stroke='#883CAC'
					strokeOpacity='0.5'
					strokeWidth='2.9003'
					strokeLinecap='round'
					strokeLinejoin='round'
				/>
			</svg>

			<svg className={styles.doodles} width='42' height='85' viewBox='0 0 42 85' fill='none' xmlns='http://www.w3.org/2000/svg'>
				<path
					d='M26.6854 15.1484C26.6854 11.9342 25.4086 8.85168 23.1358 6.5789C20.863 4.30613 17.7805 3.0293 14.5663 3.0293C11.3521 3.0293 8.26958 4.30613 5.9968 6.5789C3.72403 8.85168 2.44719 11.9342 2.44719 15.1484C2.46072 18.3574 3.74644 21.4301 6.02233 23.6924L-19.3066 49.0214C-21.569 46.7455 -24.6416 45.4597 -27.8506 45.4462C-31.0648 45.4462 -34.1473 46.7231 -36.4201 48.9958C-38.6929 51.2686 -39.9697 54.3511 -39.9697 57.5653C-39.9697 60.7795 -38.6929 63.8621 -36.4201 66.1348C-34.1473 68.4076 -31.0648 69.6845 -27.8506 69.6845C-27.8506 72.8986 -26.5738 75.9812 -24.301 78.254C-22.0282 80.5267 -18.9457 81.8036 -15.7315 81.8036C-12.5173 81.8036 -9.43475 80.5267 -7.16198 78.254C-4.8892 75.9812 -3.61237 72.8986 -3.61237 69.6845C-3.6259 66.4755 -4.91161 63.4028 -7.18751 61.1405L18.1415 35.8115C20.4038 38.0874 23.4764 39.3731 26.6854 39.3867C29.8996 39.3867 32.9822 38.1098 35.2549 35.837C37.5277 33.5643 38.8046 30.4817 38.8046 27.2675C38.8046 24.0533 37.5277 20.9708 35.2549 18.698C32.9822 16.4252 29.8996 15.1484 26.6854 15.1484Z'
					stroke='#883CAC'
					strokeOpacity='0.5'
					strokeWidth='2.9003'
					strokeLinecap='round'
					strokeLinejoin='round'
				/>
			</svg>

			<svg className={styles.doodles} width='61' height='61' viewBox='0 0 61 61' fill='none' xmlns='http://www.w3.org/2000/svg'>
				<g clipPath='url(#clip0_613_452)'>
					<path
						d='M18.3553 37.3201C17.2381 37.9651 16.0711 38.1246 14.8544 37.7986C13.6376 37.4726 12.7067 36.751 12.0617 35.6338C11.4167 34.5166 11.2572 33.3496 11.5832 32.1328C11.9092 30.916 12.6309 29.9851 13.7481 29.3401C14.8653 28.6951 16.0322 28.5356 17.249 28.8617C18.4658 29.1877 19.3967 29.9093 20.0417 31.0265C20.6867 32.1437 20.8462 33.3107 20.5202 34.5275C20.1941 35.7442 19.4725 36.6751 18.3553 37.3201ZM21.8515 26.7896C20.7343 27.4346 19.5673 27.5941 18.3506 27.2681C17.1338 26.9421 16.2029 26.2204 15.5579 25.1032C14.9129 23.986 14.7534 22.8191 15.0794 21.6023C15.4054 20.3855 16.1271 19.4546 17.2443 18.8096C18.3615 18.1646 19.5284 18.0051 20.7452 18.3311C21.962 18.6572 22.8929 19.3788 23.5379 20.496C24.1829 21.6132 24.3424 22.7802 24.0164 23.9969C23.6903 25.2137 22.9687 26.1446 21.8515 26.7896ZM31.4275 21.2609C30.3103 21.9059 29.1433 22.0654 27.9266 21.7394C26.7098 21.4133 25.7789 20.6917 25.1339 19.5745C24.4889 18.4573 24.3294 17.2904 24.6554 16.0736C24.9814 14.8568 25.703 13.9259 26.8202 13.2809C27.9374 12.6359 29.1044 12.4764 30.3212 12.8024C31.538 13.1285 32.4689 13.8501 33.1139 14.9673C33.7589 16.0845 33.9184 17.2515 33.5923 18.4682C33.2663 19.685 32.5447 20.6159 31.4275 21.2609ZM42.2953 23.4984C41.1781 24.1434 40.0111 24.3029 38.7943 23.9768C37.5776 23.6508 36.6467 22.9292 36.0017 21.812C35.3567 20.6948 35.1972 19.5278 35.5232 18.3111C35.8492 17.0943 36.5708 16.1634 37.688 15.5184C38.8052 14.8734 39.9722 14.7139 41.189 15.0399C42.4058 15.3659 43.3366 16.0876 43.9817 17.2048C44.6267 18.322 44.7862 19.4889 44.4601 20.7057C44.1341 21.9225 43.4125 22.8534 42.2953 23.4984ZM31.0012 51.299C29.8042 51.9901 28.5347 52.1109 27.1928 51.6613C25.8508 51.2118 24.82 50.3627 24.1005 49.114C23.3019 47.7308 23.0756 46.2478 23.4215 44.6649C23.7674 43.082 24.1135 41.5167 24.4598 39.969C24.7552 38.699 24.902 37.4176 24.9003 36.1247C24.8987 34.8319 25.0376 33.5366 25.3169 32.239C25.5028 31.2095 25.8509 30.246 26.3612 29.3484C26.8716 28.4509 27.5786 27.7405 28.4824 27.2173C29.3868 26.6951 30.3476 26.4241 31.3647 26.4044C32.3818 26.3846 33.3826 26.5516 34.3671 26.9053C35.6033 27.3265 36.7918 27.864 37.9325 28.5177C39.0731 29.1714 40.2743 29.7014 41.5361 30.1079C43.0507 30.5812 44.5793 31.0641 46.122 31.5566C47.6648 32.0491 48.8359 32.9867 49.6356 34.3692C50.3574 35.6194 50.5774 36.938 50.2958 38.325C50.0141 39.7119 49.2749 40.7501 48.0784 41.4395C46.642 42.2688 45.1498 42.9707 43.6018 43.5453C42.0538 44.1198 40.5616 44.8217 39.1252 45.651C37.6888 46.4803 36.3348 47.4217 35.0632 48.475C33.7916 49.5284 32.4376 50.4697 31.0012 51.299Z'
						fill='#883CAC'
						fillOpacity='0.5'
					/>
				</g>
				<defs>
					<clipPath id='clip0_613_452'>
						<rect width='44.2296' height='44.2296' fill='white' transform='translate(0 22.1152) rotate(-30)' />
					</clipPath>
				</defs>
			</svg>

			<div className='sec-container'>
				<div className='sec-p'>
					<div className={styles.wrapper}>
						<HeadingWithBtn className={styles.content} blackHeading='Latest Veterinary Products By Your Preferred' BHLastWord='Vendors' svgAfterBH={true}>
							<h5 className='primary-color'>{`Browse & Choose`}</h5>
							<p className='gray-color'>{"Explore the newest products from your trusted vendors and meet your vet practice's advanced needs."}</p>
							<p className='gray-color'>{'Enjoy a seamless shopping experience with direct buying, exclusive deals, and reliable suppliers all in one convenient platform.'}</p>
						</HeadingWithBtn>
						{!swiperLoaded ? (
							<>{data?.[0] && <NewCard key={data[0]?.id} data={data[0]} setmodalLoading={setmodalLoading} setmodal={setmodal} setModalData={setModalData} />}</>
						) : (
							SwiperComponent && (
								<SwiperComponent.Swiper
									autoHeight={true}
									slidesPerView={1}
									spaceBetween={10}
									pagination={{
										clickable: true
									}}
									modules={[SwiperComponent.FreeMode, SwiperComponent.Pagination]}
									breakpoints={{
										481: {
											slidesPerView: 2,
											spaceBetween: 10
										},
										769: {
											slidesPerView: 3,
											spaceBetween: 20
										},
										1025: {
											slidesPerView: 2,
											spaceBetween: 30
										}
									}}
									className={`${styles.slides} mySwiper latest-products`}
								>
									{data?.map((item) => {
										return (
											<SwiperComponent.SwiperSlide key={item?.id}>
												<NewCard data={item} setmodalLoading={setmodalLoading} setmodal={setmodal} setModalData={setModalData} />
											</SwiperComponent.SwiperSlide>
										)
									})}
								</SwiperComponent.Swiper>
							)
						)}
					</div>
				</div>
			</div>
		</section>
	)
}

export default LatestProducts
